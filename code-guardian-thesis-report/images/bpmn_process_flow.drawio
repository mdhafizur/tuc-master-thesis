<mxfile host="app.diagrams.net">
  <diagram name="Process View">
    <mxGraphModel dx="1800" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1100">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Process View: Code Guardian Analysis Workflows" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=18;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="10" width="700" height="40" as="geometry" />
        </mxCell>

        <!-- Swim Lanes -->
        <mxCell id="lane-developer" value="Developer" style="swimlane;html=1;startSize=40;fillColor=#e3f2fd;strokeColor=#1976d2;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="1520" height="140" as="geometry" />
        </mxCell>

        <mxCell id="lane-extension" value="VS Code Extension" style="swimlane;html=1;startSize=40;fillColor=#fff3e0;strokeColor=#f57c00;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="220" width="1520" height="200" as="geometry" />
        </mxCell>

        <mxCell id="lane-backend" value="Local Backend" style="swimlane;html=1;startSize=40;fillColor=#f3e5f5;strokeColor=#7b1fa2;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="420" width="1520" height="200" as="geometry" />
        </mxCell>

        <mxCell id="lane-llm" value="Ollama LLM" style="swimlane;html=1;startSize=40;fillColor=#e8f5e9;strokeColor=#388e3c;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="620" width="1520" height="140" as="geometry" />
        </mxCell>

        <!-- Workflow 1: Real-time Analysis -->
        <mxCell id="w1-start" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4caf50;strokeColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="80" y="110" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="w1-start-label" value="Type code" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="60" y="155" width="80" height="20" as="geometry" />
        </mxCell>

        <mxCell id="w1-event1" value="onChange&#xa;event" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffeb3b;strokeColor=#f57f17;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="160" y="110" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="w1-debounce" value="Debounce&#xa;(500ms)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="270" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w1-extract" value="Extract&#xa;function&#xa;scope" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="280" y="270" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w1-cache-check" value="Check&#xa;cache" style="shape=rhombus;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="265" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="w1-cache-hit" value="Return&#xa;cached" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4caf50;strokeColor=#2e7d32;fontSize=10;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="270" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w1-invoke" value="Invoke&#xa;LLM" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="400" y="460" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w1-inference" value="LLM&#xa;inference&#xa;(1-3s)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66bb6a;strokeColor=#2e7d32;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="400" y="660" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w1-parse" value="Parse&#xa;JSON" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="520" y="460" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w1-render" value="Render&#xa;diagnostics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="640" y="270" width="80" height="50" as="geometry" />
        </mxCell>

        <!-- Workflow 2: On-Demand Analysis with RAG -->
        <mxCell id="w2-start" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#4caf50;strokeColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="800" y="110" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="w2-start-label" value="Trigger&#xa;command" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="780" y="155" width="80" height="30" as="geometry" />
        </mxCell>

        <mxCell id="w2-extract" value="Extract&#xa;selection/&#xa;file" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="880" y="270" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w2-rag-check" value="RAG&#xa;enabled?" style="shape=rhombus;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1000" y="265" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="w2-embed" value="Generate&#xa;embedding" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1000" y="460" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w2-retrieve" value="Vector&#xa;search&#xa;(top-5)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1120" y="460" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w2-augment" value="Augment&#xa;prompt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1240" y="460" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w2-invoke" value="Invoke&#xa;LLM&#xa;+RAG" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1240" y="540" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w2-inference" value="LLM&#xa;inference&#xa;(1.5-2.5s)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66bb6a;strokeColor=#2e7d32;fontSize=10;fontColor=#FFFFFF;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1240" y="660" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w2-parse" value="Parse &&#xa;validate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1360" y="460" width="80" height="50" as="geometry" />
        </mxCell>

        <mxCell id="w2-render" value="Show&#xa;findings" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1360" y="270" width="80" height="50" as="geometry" />
        </mxCell>

        <!-- Arrows for Workflow 1 -->
        <mxCell id="a1-1" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#1976d2;" edge="1" parent="1" source="w1-start" target="w1-event1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a1-2" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;" edge="1" parent="1" source="w1-event1" target="w1-debounce">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a1-3" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;" edge="1" parent="1" source="w1-debounce" target="w1-extract">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a1-4" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;" edge="1" parent="1" source="w1-extract" target="w1-cache-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a1-5" value="HIT" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#2e7d32;" edge="1" parent="1" source="w1-cache-check" target="w1-cache-hit">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a1-6" value="MISS" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6a1b9a;" edge="1" parent="1" source="w1-cache-check" target="w1-invoke">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a1-7" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#388e3c;" edge="1" parent="1" source="w1-invoke" target="w1-inference">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a1-8" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6a1b9a;" edge="1" parent="1" source="w1-inference" target="w1-parse">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="560" y="685" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="a1-9" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;" edge="1" parent="1" source="w1-parse" target="w1-render">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="680" y="485" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="a1-10" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;" edge="1" parent="1" source="w1-cache-hit" target="w1-render">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Arrows for Workflow 2 -->
        <mxCell id="a2-1" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#1976d2;" edge="1" parent="1" source="w2-start" target="w2-extract">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-2" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;" edge="1" parent="1" source="w2-extract" target="w2-rag-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-3" value="YES" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6a1b9a;" edge="1" parent="1" source="w2-rag-check" target="w2-embed">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-4" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6a1b9a;" edge="1" parent="1" source="w2-embed" target="w2-retrieve">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-5" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6a1b9a;" edge="1" parent="1" source="w2-retrieve" target="w2-augment">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-6" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6a1b9a;" edge="1" parent="1" source="w2-augment" target="w2-invoke">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-7" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#388e3c;" edge="1" parent="1" source="w2-invoke" target="w2-inference">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-8" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6a1b9a;" edge="1" parent="1" source="w2-inference" target="w2-parse">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1400" y="685" />
            </Array>
          </mxGeometry>
        </mxCell>

        <mxCell id="a2-9" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;" edge="1" parent="1" source="w2-parse" target="w2-render">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="a2-10" value="NO" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#f57c00;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="w2-rag-check" target="w2-render">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1100" y="240" />
              <mxPoint x="1400" y="240" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Labels -->
        <mxCell id="workflow1-label" value="Workflow 1: Real-time Function Analysis (Debounced)" style="text;html=1;strokeColor=none;fillColor=#e1f5fe;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=12;fontStyle=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="180" width="320" height="30" as="geometry" />
        </mxCell>

        <mxCell id="workflow2-label" value="Workflow 2: On-Demand Analysis with RAG" style="text;html=1;strokeColor=none;fillColor=#f3e5f5;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=12;fontStyle=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="180" width="300" height="30" as="geometry" />
        </mxCell>

        <!-- Privacy Boundary -->
        <mxCell id="privacy-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#00994d;strokeWidth=4;dashed=1;dashPattern=12 12;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="1520" height="680" as="geometry" />
        </mxCell>

        <mxCell id="privacy-text" value="Privacy Boundary: All processes execute locally" style="text;html=1;strokeColor=none;fillColor=#e8f5e9;align=left;verticalAlign=middle;whiteSpace=wrap;fontSize=12;fontStyle=1;fontColor=#00994d;" vertex="1" parent="1">
          <mxGeometry x="60" y="725" width="400" height="25" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;" vertex="1" parent="1">
          <mxGeometry x="40" y="800" width="1520" height="100" as="geometry" />
        </mxCell>

        <mxCell id="legend-title3" value="Legend:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="810" width="80" height="20" as="geometry" />
        </mxCell>

        <mxCell id="leg-event" value="User event" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffeb3b;strokeColor=#f57f17;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="60" y="840" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="leg-ext" value="Extension&#xa;processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="160" y="840" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="leg-backend" value="Backend&#xa;processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;strokeColor=#6a1b9a;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="260" y="840" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="leg-llm" value="LLM&#xa;inference" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66bb6a;strokeColor=#2e7d32;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="360" y="840" width="80" height="40" as="geometry" />
        </mxCell>

        <mxCell id="leg-decision" value="Decision&#xa;point" style="shape=rhombus;whiteSpace=wrap;html=1;fillColor=#ff9800;strokeColor=#e65100;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="470" y="840" width="70" height="40" as="geometry" />
        </mxCell>

        <mxCell id="leg-cache" value="Cache hit&#xa;(fast path)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4caf50;strokeColor=#2e7d32;fontSize=10;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="560" y="840" width="80" height="40" as="geometry" />
        </mxCell>

        <!-- Performance Notes -->
        <mxCell id="perf-note1" value="Typical latency:&#xa;• Cache hit: 5-10ms&#xa;• Cache miss (LLM-only): 0.9-3s&#xa;• RAG-enhanced: +0.05-0.1s" style="text;html=1;strokeColor=none;fillColor=#fff3e0;align=left;verticalAlign=top;whiteSpace=wrap;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="680" y="830" width="200" height="70" as="geometry" />
        </mxCell>

        <mxCell id="perf-note2" value="Key optimizations:&#xa;• Debouncing reduces calls 80-90%&#xa;• Function-level scoping limits prompt size&#xa;• Cache hit rate: 60%+ during editing&#xa;• RAG retrieval: top-5 chunks, ~50ms" style="text;html=1;strokeColor=none;fillColor=#f3e5f5;align=left;verticalAlign=top;whiteSpace=wrap;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="900" y="820" width="240" height="80" as="geometry" />
        </mxCell>

        <mxCell id="perf-note3" value="Privacy guarantees:&#xa;• All code analysis local (no exfiltration)&#xa;• LLM runs on localhost:11434&#xa;• Vector DB stored locally&#xa;• Optional CVE refresh: metadata only" style="text;html=1;strokeColor=none;fillColor=#e8f5e9;align=left;verticalAlign=top;whiteSpace=wrap;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="1160" y="820" width="230" height="80" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
